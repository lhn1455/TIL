# 1. Node.js 첫걸음

## 웹 서버와 Node.js의 관계

![웹환경](/NodeJs/img/node.png)

- 클라이언트 : 사용자가 보는 컴퓨터
- 서버 : 웹 서비스 할 리소스가 저장되어 있는 컴퓨터   

    웹 브라우저를 켜고 www.google.com을 입력했다고 가정하면, 내 컴퓨터는 클라이언트가 되는 것이고 구글 컴퓨터는 서버가 되는 것. 그리고 url을 브라우저에 입력해서 <Enter> 키를 누른 작업은 구글 웹 페이지를 띄워 달라는 클라이언트의 요청(Request)가 되고, 구글 컴퓨터가 구글 웹 페이지의 html 파일을 내 브라우저로 보내주는 것을 응답(Response)라고 함   


## *" 웹 서버 : 클라이언트에서 보내는 요청을 처리하고 적절한 결과를 보여주는 프로그램 "*

<br>
<br>

## *" Node.js : Chrome V8 JavaScript 엔진으로 빌드된 JavaScript 런타임, 즉 웹 브라우저 밖에서 우리가 작성할 자바스크립트 서버 코드를 실행해주는 환경 "*


<br>

<hr>

### **Node.js를 사용하면 좋은 서비스**   

- 내가 만들 웹이 리얼타임이다.
- 내가 만들 웹은 커스터마이징이 많이 필요하다
- 내가 만들 웹에 자바스크립트 API를 사용해야 한다.
- 내가 만들 웹은 빠른 실행과 성능이 중요하다.

<br>

### **Node.js가 동작하는 방식**
< 동기적 처리와 비동기적 처리 >

- 동기적 처리 방법 : 하나씩 순차적으로 일을 해결해 나가는 것
    - 장점 : 안정적으로 스케줄을 다룰 수 있음
    - 단점 : 오랜 시간이 걸림

- 비동기적 처리 방법 : 한번에 여러 일을 시작하고 보는 방법
    - 장점 : 시간 단축이 가능함
    - 단점 : 한번에 시작한 일의 관리가 복잡 함

< 블로킹과 논블로킹 >

- 블로킹 방식 : 제어권을 넘겨주지 않고 대기하게 만드는 것
- 논블로킹 방식 : 다른 작업과 관계없이 일을 수행할 수 있게 만드는 것   

< 싱글 스레드와 이벤트 루프 >

- 스레드 : 경량화된 프로세스   
        → 인터넷 서핑을 한다고 하면 하나의 브라우저를 실행 한 것이 *프로세스*이며, 그 브라우저 내에서 이동, 검색 등 다른 작업을 수행하는 것을 *스레드*라고 함
- 이벤트 루프 : 어떤 이벤트가 있는지 감시하는 감시자. (논블로킹 / 비동기 방식을 택하면서 하나의 스레드를 가지고 빠르게 일을 처리할 수 있도록 해주는 것)   
    - Node.js는 응답을 기다리는 대신, 작업이 종료되면 이벤트를 발생시키고 *콜백 큐*(작업 큐)에 등록하는 방법을 택함. 응답을 기다리는 대신 다른 작업을 먼저 수행하는 것.   
        ***Q. 그러면 작업이 완료된 것을 어떻게 알 수 있을 까?***   
        → **이벤트 루프**라는 것이 계속 감시를 하고 있기 때문에 가능   
    - 이벤트 루프는 지속적으로 *콜 스택*이 비어있는 지 체크. 콜 스택이 비어있으면 콜백 큐의 작업을 콜 스택으로 밀어 넣음.
        → 간단하게, 콜 스택은 먼저 실행하는 작업이 있는 공간이고, 콜백 큐는 나중에 실행할 작업이 있는 공간


<br>

## *" Node.js는 응답을 기다리지 않고 바로 다음 작업을 실행하는 논블로킹 / 비동기 방식을 사용 "*

<br>
<br>
<br>
<br>



<hr>

## 📌 Node.js가 스크립트 코드를 실행할 때 동작하는 과정 요약



1. '이벤트 루프'는 일종의 감시자 역할. 어떤 이벤트가 있는지 계속 감시하고 있는 감시자이고 이벤트가 감지 되면, 그 작업을 위해 작업 스레드를 생성

2. 작업 스레드는 일종의 작업공간 같은 것. 이벤트를 처리하기 위해 이벤트 루프는 처리 작업을 작업 스레드에게 맡겨버리고 다른 이벤트가 없나 다시 감시하기 시작

3. 작업 스레드가 작업을 받을 때, 콜백 함수라는 것을 받는데 콜백 함수란, 작업이 끝나면 실행하는 함수

4. 작업 스레드가 적업을 마치면 이 콜백 함수를 실행하고 싶다고 최고 감시자인 이벤트 루프에게 응답을 보냄

5. 응답을 받은 이벤트 루프는 콜백 함수의 결과를 클라이언트에 전송하여 우리가 볼 수 있는 결과로 바꾸어 줌   
<br>


<hr>


<br>



✏️ 용어정리
- **프레임워크** : 애플리케이션 개발에 바탕이 되는 템플릿과 같은 역할을 하는 클래스와 인터페이스의 집합
- **CRUD** : 데이터 처리의 기본 기능인 생성, 조회, 수정, 삭제(**C**reate, **R**ead, **U**pdate, **D**elete)   
- **런타임(runtime)** : 실행환경, 실행기
- **리얼타임** : 애플리케이션에서 어떤 요청을 신속하게 처리하여 응답헤야 하는 것
- **콜백 큐** : 이벤트 발생 후 호출되어야 할 작업을 기다리는 자료구조. 이벤트 큐 라고도 함.
- **콜 스택** : 함수의 호출을 기록하는 자료구조. 현재 실행 중인 작업이 끝났을 때 어느 실행 부분으로 돌아갈지 보관



